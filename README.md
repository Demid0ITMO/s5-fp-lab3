# Лабораторная работа №3
#### Студент `Рязанов Демид Витальевич`
#### ИСУ `367522`
#### Язык `Ocaml`
---

## 1. Требования к разработанному ПО

### 1.1. Функциональные требования
Программа выполняет интерполяцию таблично заданной функции двумя методами:
- **Линейная интерполяция** – для 2+ точек
- **Интерполяция полиномом Ньютона** – для N+ точек (N настраивается)

### 1.2. Алгоритм работы
1. Чтение входных данных в формате "x y" через стандартный ввод
2. Накопление скользящего окна точек (размер N для метода Ньютона)
3. Для каждой новой точки:
   - Вычисление интерполированных значений с заданным шагом
   - Вывод результатов для активированных методов
4. Поддержка одновременного использования двух методов интерполяции

### 1.3. Алгоритмы интерполяции
- **Линейная**
- **Ньютона**
---

## 2. Ключевые элементы реализации

### 2.1. Конфигурация (`parser.ml`)
```ocaml
type config = { 
  interpol_alg : string;  
  step : float;           
  n : int;                
  delim : string          
}
```

### 2.2 Модуль интерполяции (`interpolation.ml`)
```ocaml
module Linear : InterpolationSig = struct
  let eval x = function
    | (x1, y1) :: (x2, y2) :: _ ->
        let slope = (y2 -. y1) /. (x2 -. x1) in
        y1 +. (slope *. (x -. x1))
end

module Newton : InterpolationSig = struct
  let rec divided_diff = function
    | (x1, y1) :: (x2, y2) :: rest ->
        (y2 -. y1) /. (x2 -. x1) :: divided_diff ((x2, y2) :: rest)
end
```

### 2.3. Основной цикл (`main.ml`)
```ocaml
let rec process last_x points =
  let input = read_line () in
  match parse_point input with
  | Ok (x, y) ->
      let new_points = 
        if List.length points >= n then List.tl points @ [ (x, y) ]
        else points @ [ (x, y) ]
      in
      
      let linear_result = if linear_enabled then ... in
      let newton_result = if newton_enabled then ... in
      process (Some new_last) new_points
```

## 3. Ввод/вывод программы

### 3.1 Запуск программы

```
./lab3 [параметры]
```

### 3.2. Параметры командной строки

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| `--alg ALG` | Алгоритм интерполяции: `linear`/`newton`/`both` (любое другое значение игнорируется) | `both` |
| `--step F` | Шаг интерполяции, число с плавающей точкой > 0 | `0.5` |
| `-n N` | Количество точек для интерполяции Ньютона, целое число > 0 | `4` |
| `--delimeter S` | Разделитель между координатами X и Y во входных данных | пробел (`" "`) |

### 3.3. Примеры использования

```
# Оба метода, шаг 0.3, 6 точек для Ньютона
echo -e "0 0\n1 1\n2 4" | ./lab3 --both -n 6 --step 0.3

# Только линейная интерполяция
echo -e "0 0\n1 1" | ./lab3 --alg linear

# Кастомный разделитель
echo -e "0,0\n1,1" | ./lab3 --delimeter ","
```

### 3.4 Формат вывода

```
linear > 0.5 0.5
newton > 0.5 0.5
linear > 1.0 1.0
```
